# ─────────────────────────────────────────────────────────────────────────────
# Production Environment – blast_sql_vertical
# Copy this file to .env.prod and fill in all values marked REQUIRED.
# NEVER commit .env.prod to git.
# ─────────────────────────────────────────────────────────────────────────────

# ── Image registry ──────────────────────────────────────────────────────────
# GitHub username or org that owns the GHCR packages
GHCR_OWNER=your-github-username-or-org
# Pin to a specific image tag for deterministic deploys (or use "latest")
IMAGE_TAG=latest

# ── Cloudflare Tunnel ───────────────────────────────────────────────────────
# REQUIRED: obtained from Cloudflare Zero Trust → Tunnels → your tunnel → token
# Format: eyJ... (long base64 string)
CLOUDFLARE_TUNNEL_TOKEN=

# ── App base URL ────────────────────────────────────────────────────────────
# REQUIRED: public URL of the app (used in password-reset emails, etc.)
APP_BASE_URL=https://education.blastgroup.org

# ── Admin bootstrap (used only on first startup if DB is empty) ─────────────
INITIAL_ADMIN_EMAIL=admin@blastgroup.org
INITIAL_ADMIN_PASSWORD=change-me-immediately

# ── Stripe (REQUIRED) ───────────────────────────────────────────────────────
STRIPE_SECRET_KEY=sk_live_xxx
STRIPE_PUBLISHABLE_KEY=pk_live_xxx
# Webhook signing secret from Stripe Dashboard → Webhooks → your endpoint
# Endpoint URL: https://education.blastgroup.org/api/billing/stripe-webhook
STRIPE_WEBHOOK_SECRET=whsec_xxx
STRIPE_PRICE_ID=price_xxx

# Checkout redirect URLs
CHECKOUT_SUCCESS_URL=https://education.blastgroup.org/checkout/success
CHECKOUT_CANCEL_URL=https://education.blastgroup.org/checkout/cancelled
CHECKOUT_RETURN_URL=https://education.blastgroup.org/checkout/success

# ── Stripe optional ─────────────────────────────────────────────────────────
STRIPE_CHECKOUT_PAYMENT_METHOD_TYPES=card,pix
STRIPE_CHECKOUT_LOCALE=pt-BR
STRIPE_CARD_INSTALLMENTS_ENABLED=1
STRIPE_AUTOMATIC_TAX_ENABLED=0
STRIPE_WEBHOOK_FORWARD_EVENTS=checkout.session.completed,payment_intent.succeeded,charge.refunded,customer.subscription.deleted,charge.dispute.created

# ── Billing ──────────────────────────────────────────────────────────────────
BILLING_COURSE_ID=sql-basics
ACCESS_DURATION_MONTHS=6
REFUND_WINDOW_DAYS=14
CHECKOUT_SIGNUP_INTENT_TTL_HOURS=24

# ── Encryption (REQUIRED) ───────────────────────────────────────────────────
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
CPF_ENCRYPTION_KEY=

# ── Email / Resend (REQUIRED for password reset) ─────────────────────────────
RESEND_API_KEY=re_xxx
RESEND_FROM_EMAIL=noreply@blastgroup.org

# ── Auth ─────────────────────────────────────────────────────────────────────
AUTH_TOKEN_TTL_HOURS=168
IMPERSONATION_TTL_MINUTES=30
PASSWORD_RESET_TOKEN_TTL_MINUTES=60

# ── Content ──────────────────────────────────────────────────────────────────
STRICT_CONTENT_VALIDATION=1

# ── PDF renderer ─────────────────────────────────────────────────────────────
PLAYWRIGHT_CHROMIUM_ARGS=--disable-dev-shm-usage,--no-sandbox
